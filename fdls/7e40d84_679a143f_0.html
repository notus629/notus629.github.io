<html><head></head>
<body>

<div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>04. ThinkPHP 3.1.2 输出和模型使用 2</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><div><span style="font-weight: bold; line-height: 26px; "><font class="Apple-style-span" face="Consolas">本节课大纲：</font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><span style="font-weight: bold; line-height: 22px; "><font class="Apple-style-span" face="Consolas">一、ThinkPHP 3 的输出 &nbsp; &nbsp; &nbsp;（重点）</font></span></div><div><span style="line-height: 22px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 22px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; a、通过 <font class="Apple-style-span" color="#ff6600">echo</font> 等 PHP 原生的输出方式在页面中输出</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; b、通过 <font class="Apple-style-span" color="#ff6600">display</font> 方法输出</font></span></div><div><span style="line-height: 22px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></span></div><div><span style="line-height: 22px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 想分配变量可以使用 <font class="Apple-style-span" color="#ff6600">assign</font> 方法</font></span></div><div><span class="Apple-style-span" style="font-family: Consolas; line-height: 16px; "><br></span></div><div><span class="Apple-style-span" style="font-family: Consolas; line-height: 16px; "><br></span></div><div><span class="Apple-style-span" style="font-family: Consolas; line-height: 22px;">&nbsp; &nbsp;&nbsp;</span><span class="Apple-style-span" style="font-family: Consolas; line-height: 16px; ">c、修改左右定界符</span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 需要修改配置文件中的配置项</font></span></div><div><span style="color: rgb(255, 0, 255); line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></span><span class="Apple-style-span" style="font-family: Consolas; line-height: 16px; "><font class="Apple-style-span" color="#ff00ff">'TMPL_L_DELIM'=&gt;'&lt;{', &nbsp; &nbsp; </font><font class="Apple-style-span" color="#666699">// 修改左定界符</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'TMPL_R_DELIM'=&gt;'}&gt;', &nbsp; &nbsp; </font><font class="Apple-style-span" face="Consolas" color="#666699">// 修改右定界符</font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><span style="font-weight: bold; line-height: 28px; "><font class="Apple-style-span" face="Consolas">二、ThinkPHP 3 的模型使用 &nbsp;（重点）</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 需要在方法中通过 <font class="Apple-style-span" color="#ff0000"><b>new Model（表名）</b></font><font class="Apple-style-span" color="#ff00ff">&nbsp;</font>的形式操作数据库</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; $m=new Model('User');</font></span></div><div><span style="line-height: 22px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; $arr=$m-&gt;select();</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp;'DB_TYPE'=&gt;'mysql', &nbsp; //设置数据库类型</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp;'DB_HOST'=&gt;'localhost',//设置主机</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp;'DB_NAME'=&gt;'thinkphp',//设置数据库名</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp;'DB_USER'=&gt;'root', &nbsp; &nbsp;//设置用户名</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp;'DB_PWD'=&gt;'', &nbsp; &nbsp; &nbsp; &nbsp;//设置密码</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp;'DB_PORT'=&gt;'3306', &nbsp; //设置端口号</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp;'DB_PREFIX'=&gt;'tp_', &nbsp;//设置表前缀</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 也可以使用 <font class="Apple-style-span" color="#ff0000"><b>DSN</b></font> 方法进行配置</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#666699">&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;如果两种方式同时存在，以 DSN 方式为优先</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#666699">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// 使用DSN方式配置数据库信息</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#008000">&nbsp; &nbsp; &nbsp; &nbsp; </font><font class="Apple-style-span" face="Consolas" color="#ff00ff">'DB_DSN'=&gt;'mysql://root:@localhost:3306/thinkphp'</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 还有一种简单实用模型的方式</font></span></div><div><font class="Apple-style-span" face="Consolas"><span style="line-height: 16px; "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span style="line-height: 16px; ">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-weight: bold; color: rgb(255, 0, 0); line-height: 16px; ">M()&nbsp;</span><span style="color: rgb(0, 0, 0); line-height: 16px; ">等效为&nbsp;</span><span style="color: rgb(255, 0, 0); line-height: 16px; ">new Model();</span></font></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $m=M('User');</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $arr=$m-&gt;select();</font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><span style="line-height: 16px; ">&nbsp; &nbsp; 使用模型的实例可以对数据进行操作，操作的工作一般就是对数据库进行</span><span style="font-weight: bold; line-height: 16px; ">&nbsp;</span><span style="font-weight: bold; color: rgb(255, 0, 0); line-height: 16px; ">增删改查 CURD</span></font></div><div><span style="color: rgb(0, 0, 0); line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 增 -C Create &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">$m-&gt;add()</font></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 删 -D Delete &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">$m-&gt;delete()</font></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 改 -U Update &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">$m-&gt;save()</font></font></span></div><div><span class="Apple-style-span" style="font-family: Consolas; line-height: 16px;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="Apple-style-span" style="font-family: Consolas; line-height: 28px; ">查 -R Read &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">$m-&gt;select()</font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><span style="font-weight: bold; line-height: 30px; "><font class="Apple-style-span" face="Consolas">三、补充 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （了解）</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; a、模板可以遍历数组</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &lt;volist name='data' id='vo'&gt;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;{$vo.id}&gt;----&lt;{$vo.username}&gt;-----&lt;{$vo.sex}&gt;&lt;br/&gt;</font></span></div><div><span style="line-height: 28px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/volist&gt;</font></span></div><div><font class="Apple-style-span" face="Consolas"><span style="line-height: 22px; ">&nbsp; &nbsp; &nbsp; &nbsp;</span></font></div><div><font class="Apple-style-span" face="Consolas"><span style="line-height: 22px; ">&nbsp; &nbsp; b、我们可以开启调试功能中的&nbsp;</span><span style="font-weight: bold; color: rgb(255, 0, 0); line-height: 22px; ">page_trace</span></font></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 1.开启调试功能</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font><font class="Apple-style-span" face="Consolas" color="#666699">// 在主入口文件 index.php 中</font></span></div><div><span style="line-height: 22px; "><font class="Apple-style-span" face="Consolas"><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; define('APP_DEBUG',true); </font>&nbsp;</font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span style="line-height: 16px; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 2.我们需要设置配置文件，开启页面 trace</font></span></div><div><font class="Apple-style-span" face="Consolas"><span style="line-height: 16px; "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span style="line-height: 16px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">'</font></span><span style="font-weight: bold; line-height: 16px; "><font class="Apple-style-span" color="#ff0000">SHOW_PAGE_TRACE</font><font class="Apple-style-span" color="#ff00ff">'</font></span><span style="color: rgb(255, 0, 255); line-height: 16px; ">=&gt;true</span></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>