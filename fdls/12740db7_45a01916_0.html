<html><head></head>
<body>

<div><br></div><div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 14pt; font-weight: bold; line-height: 36px; ">本节课大纲：</span></div><div><span style="font-family: 微软雅黑; font-size: 12pt; font-weight: bold; line-height: 30px; ">一、空模块和空操作</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 24px; ">&nbsp; &nbsp; &nbsp; &nbsp;1. 空操作</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;function&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">_empty</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">(</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(0, 0, 255); line-height: 18px; ">$name</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 255); line-height: 18px; ">)</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">{</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">show</span><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">("$name 不存在 &lt;a href='__APP__/Index/index'&gt;返回首页&lt;/a&gt;");</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 31px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;2. 空模块</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;class&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">EmptyAction&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">extends Action{</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;function index(){</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//只需在此处写上想要输出的代码即可，下面几行是兄弟连计师演示显示已有模板页面所加</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$city=M('City');</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$arr=$city-&gt;select();</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;assign('list',$arr);</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$name=</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(0, 0, 255); line-height: 18px; ">MODULE_NAME;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">display</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">("City:$name");</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;</span></div><div><span style="font-family: 微软雅黑; font-size: 12pt; line-height: 22px; ">二、</span><span style="font-family: 微软雅黑; font-size: 12pt; font-weight: bold; line-height: 22px; ">前置操作和后置操作</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;1、前置操作：&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">_before_操作名</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//方法(操作)执行前</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;2、后置操作：&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">_after_操作名</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//方法执行后</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">++++++++++++++++++++Leo+++++++++++++++++++++++++</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 24px; ">__APP__&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 24px; ">: &nbsp;一直到模块的路径，不包含模块(即一直到......./Tpl/）</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">一定要设置表前缀，没有设置的话，默认会为</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">think_</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">，没有前缀的话设置为'';</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">本课项目步骤：</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;1. 新建一个新项目thinkphp3</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;2. 创建一个新的数据库thinkphp3, utf8_general_ci字符集</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;新建一个user表，3个字段，id: INT , username VARCHAR 长度30, password CHAR 长度32</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;存储引擎MyISAM, 整理（校对字符集为）utf8_general_ci</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;新建一个城市表，3个字段，id: INT, name VARCHAR 30, title texts</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;存储引擎MyISAM, 整理utf8_general_ci</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;3. 向表中插入数据 &nbsp; &nbsp; &nbsp; &nbsp;</span></div><div><br></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">配置项：</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;'</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">DB_DSN</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">'=&gt;'mysql://root:@localhost:3306/thinkphp3',</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">css</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;#daohang{</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;height:150px;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background: #abcedfg;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;a {</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border: 1px solid gray;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 60px;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text-decoration: none; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//去掉超链接的下划线</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 24px; ">公共模板</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 24px; ">&nbsp; &nbsp; &nbsp; &nbsp;放在，自建的.../Tpl/Public</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;其它模板中引入: &lt;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">include file</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">="Public: header");</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">foreach</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;&lt;foreach&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">name</span><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">='list'&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">item</span><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">='v'&gt;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;a href='__APP__/city/{$v.name}'&gt;{$v.name}&lt;/a&gt;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;&lt;/foreach&gt;</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">空方法/空操作</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;当访问一个不存在的方法时，自动调用空方法</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;function _empty($name){ &nbsp; &nbsp; &nbsp; &nbsp;//传递进来的是空方法名$name</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;...</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">show</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;用 $this-&gt;show(...)来输出，而不用echo</span></div><div><br></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">空模块</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;新建一个空模块：</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; line-height: 18px; ">EmptyAction.class.php</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;class EmptyAction extends Action{</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;public function index(){</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;show('&lt;p&gt;该方法不存在&lt;/p&gt;';</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp; &nbsp;</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$name = MODULE_NAME;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;Display('City:$name'); &nbsp; &nbsp; &nbsp; &nbsp;//访问City下的$name模板</span></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">常量：</span><span style="font-family: 微软雅黑; font-size: 10pt; font-weight: bold; color: rgb(255, 0, 0); line-height: 18px; ">MODULE_NMAE</span><span style="font-family: 微软雅黑; font-size: 10pt; color: rgb(0, 0, 0); line-height: 18px; ">, 当前模块名称</span></div><div><br></div><div><br></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">访问主页时，没有登陆，则让其登陆</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;在_before_index里面判断是否登陆（属于IndexAction类的方法） &nbsp; &nbsp; &nbsp; &nbsp;</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//_SESSION['username'] ????</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(!isset(_SESSION['username']) || (_SESSION['username'] ==""){</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$this-&gt;redirect('Login/index'); &nbsp; &nbsp; &nbsp; &nbsp;//跳转到Login模块下的index方法</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;登陆之后，向_SESSION['username']里面写值</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;使用_SESSION要首先开始session start?</span></div><div><span style="font-family: 微软雅黑; font-size: 10pt; line-height: 18px; ">&nbsp; &nbsp; &nbsp; &nbsp;thinkphp已经自动默认开启</span></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>