<html><head></head>
<body>

<div><br></div><div><span class="Apple-style-span" style="font-family: Consolas; "><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><div><b>示例 - Ajax 加载 JSON</b></div><div><br></div><div><br></div><div><br></div><div><b><font class="Apple-style-span" color="#800000" style="background-color: rgb(204, 255, 255);">ajax-json.html &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></b></div><div><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;">    <span style="background-color:#efefef;">&lt;!DOCTYPE </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">html</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">html </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">lang=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"en"</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">head</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">meta </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">charset=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"UTF-8"</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">title</span><span style="background-color:#efefef;">&gt;</span>ajax-json<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">title</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">script</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="color:#000080;font-weight:bold;">var </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr </span>= <span style="color:#000080;font-weight:bold;">new </span>XMLHttpRequest();<br><br>            <span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#7a7a43;">onload </span>= <span style="color:#000080;font-weight:bold;">function</span>(){<br>                <span style="color:#000080;font-weight:bold;">if</span>( <span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#660e7a;font-weight:bold;">status </span>== <span style="color:#0000ff;">200</span>){<br>                    <span style="color:#000080;font-weight:bold;">var </span><span style="color:#458383;">response </span>= <span style="color:#660e7a;font-weight:bold;">JSON</span>.<span style="color:#7a7a43;">parse</span>(<span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#660e7a;font-weight:bold;">responseText</span>);<br><br>                    <span style="color:#000080;font-weight:bold;">var </span><span style="color:#458383;">newContent </span>= <span style="color:#008000;font-weight:bold;">''</span>;<br>                    <span style="color:#000080;font-weight:bold;">for</span>(<span style="color:#000080;font-weight:bold;">var </span><span style="color:#458383;">i </span>= <span style="color:#0000ff;">0</span>; <span style="color:#458383;">i </span>&lt; <span style="color:#458383;">response</span>.events.<span style="color:#660e7a;font-weight:bold;">length</span>; <span style="color:#458383;">i</span>++){<br>                        <span style="color:#458383;">newContent </span>+= <span style="color:#008000;font-weight:bold;">'&lt;div class="event"&gt;'</span>;<br>                        <span style="color:#458383;">newContent </span>+= <span style="color:#008000;font-weight:bold;">'&lt;img src="' </span>+ <span style="color:#458383;">response</span>.events[<span style="color:#458383;">i</span>].<span style="color:#7a7a43;">map </span>+ <span style="color:#008000;font-weight:bold;">'" alt="Location" /&gt;'</span>;<br>                        <span style="color:#458383;">newContent </span>+= <span style="color:#008000;font-weight:bold;">'&lt;p&gt;&lt;b&gt;' </span>+ <span style="color:#458383;">response</span>.events[<span style="color:#458383;">i</span>].<span style="color:#660e7a;font-weight:bold;">location </span>+ <span style="color:#008000;font-weight:bold;">'&lt;/b&gt;&lt;br/&gt;'</span>;<br>                        <span style="color:#458383;">newContent </span>+=  <span style="color:#458383;">response</span>.events[<span style="color:#458383;">i</span>].date +<span style="color:#008000;font-weight:bold;">'&lt;/p&gt;'</span>;<br>                        <span style="color:#458383;">newContent </span>+= <span style="color:#008000;font-weight:bold;">'&lt;/div&gt;'</span>;<br>                    }<br><br>                    <span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">getElementById</span>(<span style="color:#008000;font-weight:bold;">'content'</span>).<span style="color:#660e7a;font-weight:bold;">innerHTML </span>= <span style="color:#458383;">newContent</span>;<br>                }<br>            }<br><br>            <span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#7a7a43;">open</span>(<span style="color:#008000;font-weight:bold;">"GET"</span>, <span style="color:#008000;font-weight:bold;">"data.json"</span>, <span style="color:#000080;font-weight:bold;">true</span>);<br><br>            <span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#7a7a43;">send</span>();<br>        <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">script</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">head</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">body</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">div </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">id=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"content"</span><span style="background-color:#efefef;">&gt;&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">div</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">body</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">html</span><span style="background-color:#efefef;">&gt;</span><br></pre></div><div><br></div><div><br></div><div><br></div><div><b><font class="Apple-style-span" color="#800000" style="background-color: rgb(204, 255, 255);">data.json &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></b></div></font></div></span><span class="Apple-style-span" style="font-family: Consolas; font-size: 14px; white-space: pre; background-color: rgb(255, 255, 255); "><div><span class="Apple-style-span" style="font-family: Consolas; font-size: 14px; white-space: pre; background-color: rgb(255, 255, 255); "><br></span></div>  {</span><span class="Apple-style-span" style="font-family: Consolas; "><div><font class="Apple-style-span" face="Consolas"><div><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;">    <span style="color:#008000;font-weight:bold;">"events" </span>:[<br>      { <span style="color:#008000;font-weight:bold;">"location"</span>: <span style="color:#008000;font-weight:bold;">"San Francisco, CA"</span>, <span style="color:#008000;font-weight:bold;">"data"</span>: <span style="color:#008000;font-weight:bold;">"May 1"</span>, <span style="color:#008000;font-weight:bold;">"map"</span>: <span style="color:#008000;font-weight:bold;">"img/map-ca.png" </span>},<br>      { <span style="color:#008000;font-weight:bold;">"location"</span>: <span style="color:#008000;font-weight:bold;">"Austin, TX"</span>, <span style="color:#008000;font-weight:bold;">"date"</span>: <span style="color:#008000;font-weight:bold;">"May 15"</span>, <span style="color:#008000;font-weight:bold;">"map"</span>: <span style="color:#008000;font-weight:bold;">"img/map-tx.png" </span>},<br>      { <span style="color:#008000;font-weight:bold;">"location"</span>: <span style="color:#008000;font-weight:bold;">"New York, NY"</span>, <span style="color:#008000;font-weight:bold;">"date"</span>: <span style="color:#008000;font-weight:bold;">"May 30"</span>, <span style="color:#008000;font-weight:bold;">"map"</span>: <span style="color:#008000;font-weight:bold;">"img/map-ny.png" </span>}<br>    ]<br>  }<br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;"><br></pre><!--EndFragment--></div></font></div></span></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>