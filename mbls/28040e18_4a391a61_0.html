<html><head></head>
<body><font class="Apple-style-span" face="Consolas"><div><font class="Apple-style-span" face="Consolas"><br></font></div><b><font class="Apple-style-span" size="4">Outline</font></b></font><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <b><font class="Apple-style-span" color="#ff0000">htmlspecialchars</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 对HTML的特殊意义字符进行编码，如&amp;, &lt;, &gt;, "</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; @ $db = <b><font class="Apple-style-span" color="#ff0000">new mysqli</font></b>('localhost', 'username', 'pwd', 'dbname'); // 建立一个数据库连接</font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; @ $db = <font class="Apple-style-span" color="#ff0000"><b>mysqli_connect</b></font>('localhost', 'u_n', 'pwd','dbname'); &nbsp; // 面向过程方式建立数据库连接</font></div><div><font class="Apple-style-span" face="Consolas"><br></font><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff0000"><b>mysqli_connect_errno</b></font>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 没有有效连接的错误<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; mysql 参数: <span class="Apple-style-span" style="background-color: rgb(153, 204, 0);">max_connections</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 决定同时连接的个数， my.conf 文件<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; Apache 参数: <span class="Apple-style-span" style="background-color: rgb(153, 204, 0);">MaxClients</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// ditto， httpd.conf 文件<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $db-&gt;<b><font class="Apple-style-span" color="#ff0000">select_db</font></b>(dbname); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 选择数据库<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; <b><font class="Apple-style-span" color="#ff0000">mysqli_select_db</font></b>($db, db_name); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 面向过程版，选择数据库<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $query = "select * from books where ".$searchtype." like '%".$searchter."%'";<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $result = $db-&gt;<b><font class="Apple-style-span" color="#ff0000">query</font></b>($query); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 执行数据库查询<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $result = <b><font class="Apple-style-span" color="#ff0000">mysqli_query</font></b>($db, $query); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 过程版执行查询<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $num_results = $result-&gt;<b><font class="Apple-style-span" color="#ff0000">num_rows</font></b>;<!--EndFragment--></font><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; // 得到查询select返回的行数</span></div><!--StartFragment--><!--EndFragment--><!--StartFragment--><!--EndFragment--><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $num_results = <b><font class="Apple-style-span" color="#ff0000">mysqli_num_rows</font></b>($result);&nbsp;<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $result-&gt;<b><font class="Apple-style-span" color="#ff0000">fetch_assoc</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 以关联数组返回该行的数据，属性名为关键词，值为数组中的值<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; <b><font class="Apple-style-span" color="#ff0000">mysqli_fetch_assoc</font></b>($result);<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $row = $result-&gt;<b><font class="Apple-style-span" color="#ff0000">fetch_row</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 将结果取到一个索引数组中<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $row = <b><font class="Apple-style-span" color="#ff0000">mysqli_fetch_row</font></b>($result);<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; <b><font class="Apple-style-span" color="#ff0000">mysqli_fetch_array</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 以索引or/and关联数组方式获取一行<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $row = $result-&gt;<b><font class="Apple-style-span" color="#ff0000">fetch_object</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 将一行取回到一个对象中，再通过 $row-&gt;title,&nbsp;<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; $row = <b><font class="Apple-style-span" color="#ff0000">mysqli_fetch_object</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;</font><span class="Apple-style-span" style="font-family: Consolas; ">$row-&gt;author 等方式访问</span><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp;&nbsp;</span></div><div><span class="Apple-style-span" style="font-family: Consolas; "><br></span></div><div><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; $result-&gt;<b><font class="Apple-style-span" color="#ff0000">free</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 释放结果集</span></div><div><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff0000"><b>mysli_free_result</b></font>($result);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$db-&gt;<b><font class="Apple-style-span" color="#ff0000">close</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 关闭数据库连接，非必须，脚本执行完毕也会自动关闭</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<b><font class="Apple-style-span" color="#ff0000">mysqli-&gt;close</font></b>($db);</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<b><font class="Apple-style-span" color="#ff0000">mysqli_affected_rows</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 修改数据库的查询(insert, delete, update)后影响的行数<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$db-&gt;<b><font class="Apple-style-span" color="#ff0000">affected_rows</font></b>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><!--StartFragment--><div><b>&nbsp; &nbsp; &nbsp; &nbsp; 使用Prepared语句</b></div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 执行大量不同数据的相同查询时，可以提高速度</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 免受SQL注入攻击</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 基本思想：向MySQL发送一个需要执行的<font class="Apple-style-span" color="#ff00ff"><b>查询模板</b></font>，然后再单独发送数据。下次可以不用准备，再次执行</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 基本过程，如下。</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><blockquote class="webkit-indent-blockquote" style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 40px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; "><blockquote class="webkit-indent-blockquote" style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 40px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; "><div><table style="color: rgb(51, 51, 51); font-size: medium; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; "><tbody><tr><td><blockquote class="webkit-indent-blockquote" style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote class="webkit-indent-blockquote" style="margin: 0 0 0 40px; border: none; padding: 0px;"><pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; line-height: 16.25px; "><br></pre></blockquote></blockquote></td><td><blockquote class="webkit-indent-blockquote" style="margin: 0 0 0 40px; border: none; padding: 0px;"><pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; line-height: 16.25px; ">    <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>query = <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">'</span><span style="color: rgb(0, 0, 255); ">insert</span>  <span style="color: rgb(0, 0, 255); ">into</span>  books  <span style="color: rgb(0, 0, 255); ">values</span>(?, ?, ?, ?)<span style="color: rgb(163, 21, 21); ">";           // 每个数据位置设置问号</span></pre><pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; line-height: 16.25px; "><span style="color: rgb(163, 21, 21); ">    $stmt = $db-&gt;prepare($query);</span></pre><pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; line-height: 16.25px; "><span style="color: rgb(163, 21, 21); ">    $stmt-&gt;bind_param("</span>sssd<span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">"</span>, <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>isbn, <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>author, <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>title, <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>price);   // <font class="Apple-style-span" color="#ff0000"><b>'sssd':格式化字符串</b></font></pre><pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; line-height: 16.25px; ">    <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>stmt-&gt;execute();</pre><pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; line-height: 16.25px; ">    <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>echo <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>stmt-&gt;affected_rows;</pre><pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; line-height: 16.25px; ">    <span style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); ">$</span>stmt-&gt;close();</pre></blockquote></td></tr></tbody></table></div></blockquote></blockquote><div><br></div><div><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;基本函数：</b></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;面向对象版</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$stmt = $db-&gt;<b><font class="Apple-style-span" color="#ff0000">prepare</font></b>($query);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$stmt-&gt;<b><font class="Apple-style-span" color="#ff0000">bind_param</font></b>(....);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$stmt-&gt;<b><font class="Apple-style-span" color="#ff0000">execute</font></b>();</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$stmt-&gt;<b><font class="Apple-style-span" color="#ff0000">bind_result</font></b>(...); &nbsp;// 提供希望填充结果列的变量列表</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$stmt-&gt;<b><font class="Apple-style-span" color="#ff0000">execute</font></b>(...); &nbsp; &nbsp; &nbsp;// 执行之后可以循环调用fetch</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$stmt-&gt;<b><font class="Apple-style-span" color="#ff0000">fetch</font></b>(...); &nbsp; &nbsp; &nbsp; &nbsp;// 结果集的下一行的列值被填充到这些绑定变量(bind_result中绑定的)中&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;面向过程版</div><div><br></div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment--><font class="Apple-style-span" color="#ff0000"><b>mysqli_stmt_prepare</b></font>(...); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (stmt: statement?)</div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment-->or mysqli_prepare(...); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment--><font class="Apple-style-span" color="#ff0000"><b>mysqli_stmt_bind_param</b></font>();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment-->or mysqli_bind_param; &nbsp; &nbsp; &nbsp; &nbsp; // DEPRECATED in PHP 5.3.0 and REMOVED as of PHP 5.4.0.</div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment--><b><font class="Apple-style-span" color="#ff0000">mysqli_stmt_execute</font></b>();</div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment-->or mysqli_execute(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;is deprecated and will be removed.</div><div><br></div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment--><b><font class="Apple-style-span" color="#ff0000">mysqli_stmt_bind_result</font></b>(...);</div><div><!--StartFragment-->&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<!--EndFragment--><b><font class="Apple-style-span" color="#ff0000">mysqli_stmt_fetch</font></b>(...);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div><!--StartFragment--><span class="Apple-style-span" style="font-family: 'Times New Roman'; "><div><font class="Apple-style-span" face="Consolas"><b>&nbsp; &nbsp; &nbsp; &nbsp; PEAR MDB2 抽象层</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div></span></div></font><font class="Apple-style-span" face="Consolas"><div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; require_once( '<font class="Apple-style-span" color="#0000ff">MDB2.php</font>');</font></div><div style="font-family: 'Times New Roman'; "><span class="Apple-style-span" style="font-family: Consolas; "><br></span></div><div style="font-family: 'Times New Roman'; "><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$dsn = "mysql://user_name: password @ host_name : port_no/db_name"; &nbsp; &nbsp; &nbsp;// DSN，通用连接字符串</span></div><div style="font-family: 'Times New Roman'; "><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$db = MDB2::<font class="Apple-style-span" color="#ff0000"><b>connect</b></font>($dsn);</span></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;if (MDB2::<font class="Apple-style-span" color="#ff0000"><b>isError</b></font>($db) {&nbsp;</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;echo $db-&gt;<b><font class="Apple-style-span" color="#ff0000">getMessage</font></b>();</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;...</font></div></div><div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$result = $db-&gt;<font class="Apple-style-span" color="#ff0000"><b>query</b></font>($query); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// 执行一个查询</font></div><div style="font-family: 'Times New Roman'; "><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$num_results = $result-&gt;<b><font class="Apple-style-span" color="#ff0000">numRows</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 检查返回的记录行数</span></div><div style="font-family: 'Times New Roman'; "><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$row = $result-&gt;<b><font class="Apple-style-span" color="#ff0000">fetchRow</font></b>(DB_FETCHMODE_ASSOC); &nbsp;// 以<b><font class="Apple-style-span" color="#3366ff">MDB2_FETCHMODE_ASSOC</font></b>格式（相关数组）提取结果集中的一行</span></div></div></font><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;$db-&gt;<b><font class="Apple-style-span" color="#ff0000">disconnect</font></b>(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //关闭数据库连接</span><font class="Apple-style-span" face="Consolas"><div><br class="Apple-interchange-newline"><!--EndFragment--></div><br class="Apple-interchange-newline"><!--EndFragment--></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Tahoma" size="1"><br></font></div></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>