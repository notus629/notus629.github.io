<html><head></head>
<body>

<div><br></div><div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><div><b>JSONP</b></div><div><br></div><div><div>&nbsp; &nbsp; 由于浏览器不允许加载来自其它域名的 Ajax 响应（即跨域请求）。</div></div><div><br></div><div><br></div><div>&nbsp; &nbsp; 处理跨域请求的 3 种方式</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; Web 服务器上的代理文件</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; JSONP (<font class="Apple-style-span" color="#ff6600">JSON with Padding</font>)</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; 跨来源资源共享（CORS）</div><div><br></div><div><br></div><div><br></div><div><b>JSONP 原理</b></div><div><br></div><div>&nbsp; &nbsp; 即在页面中添加一个 &lt;script&gt; 元素，由该元素来从其他服务器加载 JSON 数据。</div><div><br></div><div>&nbsp; &nbsp; 而在请求数据的页面定义这个函数。</div><div><br></div><div><br></div><div>&nbsp; &nbsp; <font class="Apple-style-span" color="#800000"><b>浏览器页面</b></font></div><div><br></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &lt;script&gt;</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; function showEvents(data){</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Code to process data and</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // display it in the page here</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/script&gt;</font></div><div><font class="Apple-style-span" color="#ff00ff"><br></font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp;&lt;script src="http://example.org/jsonp"&gt;&lt;/script&gt;</font></div><div><br></div><div><br></div><div>&nbsp; &nbsp; <font class="Apple-style-span" color="#800000"><b>服务器</b></font>（http://example.org/jsonp）</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#666699">// 将下面内容发送给浏览器</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; showEvents({</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "events": [</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "location": "San Francisco, CA",</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "date": "May 1",</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "map": "img/map-ca.png"</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }...</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]</font></div><div><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; });</font></div><div><br></div><div><br></div><div><br></div><div><br></div><div><b>注：</b></div><div><br></div><div>&nbsp; &nbsp; 使用 JSONP 时，不需要使用 parse() 或 stringify(), 因为数据是以脚本文件（而非字符串的形式，被视为对象）。</div><div><br></div><div>&nbsp; &nbsp; 函数名通常会以 URL 查询字符串来传递： <font class="Apple-style-span" color="#ff6600">http://example.org/upcomingEvents.php?callback=showEvents</font> &nbsp;</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div></font></div></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>