<html><head></head>
<body>

<div><br></div><div><span class="Apple-style-span" style="font-family: Consolas; "><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><div><b>示例 - Ajax 加载 XML</b></div><div><br></div><div><br></div><div><br></div><div><b><font class="Apple-style-span" color="#800000" style="background-color: rgb(204, 255, 255);">ajax_xml.html &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></b></div></font></div></span><span class="Apple-style-span" style="font-family: Consolas; "><div><font class="Apple-style-span" face="Consolas"><div><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;">    <span style="background-color:#efefef;">&lt;!DOCTYPE </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">html</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">html </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">lang=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"en"</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">head</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">meta </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">charset=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"UTF-8"</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">title</span><span style="background-color:#efefef;">&gt;</span>Ajax load XML<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">title</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">script</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="color:#808080;font-style:italic;">// 1. Create XMLHTTPRequest object<br></span><span style="color:#808080;font-style:italic;">            </span><span style="color:#000080;font-weight:bold;">var </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr </span>= <span style="color:#000080;font-weight:bold;">new </span>XMLHttpRequest();<br><br>            <span style="color:#808080;font-style:italic;">// 3. processing XML<br></span><span style="color:#808080;font-style:italic;">            </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#7a7a43;">onload </span>= <span style="color:#000080;font-weight:bold;">function</span>(){<br>                <span style="color:#808080;font-style:italic;">// The following conditional check will not work locally - only on a server(Notus note: local text is ok!)<br></span><span style="color:#808080;font-style:italic;">                </span><span style="color:#000080;font-weight:bold;">if </span>(<span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#660e7a;font-weight:bold;">status </span>== <span style="color:#0000ff;">200</span>){<br><br>                    <span style="color:#000080;font-weight:bold;">var </span><span style="color:#458383;">response </span>= <span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#660e7a;font-weight:bold;">responseXML</span>;<br>                    <span style="color:#000080;font-weight:bold;">var </span><span style="color:#458383;">events </span>= <span style="color:#458383;">response</span>.<span style="color:#7a7a43;">getElementsByTagName</span>(<span style="color:#008000;font-weight:bold;">'event'</span>);<br><br>                    <span style="color:#000080;font-weight:bold;">for</span>(<span style="color:#000080;font-weight:bold;">var </span><span style="color:#458383;">i </span>= <span style="color:#0000ff;">0</span>; <span style="color:#458383;">i </span>&lt; <span style="color:#458383;">events</span>.<span style="color:#660e7a;font-weight:bold;">length</span>; <span style="color:#458383;">i</span>++){<br>                        <span style="color:#000080;font-weight:bold;">var </span><span style="color:#458383;">container</span>, <span style="color:#458383;">image</span>, <span style="color:#458383;">location</span>, <span style="color:#458383;">city</span>, <span style="color:#458383;">newline</span>;<br>                        <span style="color:#458383;">container </span>= <span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">createElement</span>(<span style="color:#008000;font-weight:bold;">'div'</span>);<br>                        <span style="color:#458383;">container</span>.<span style="color:#660e7a;font-weight:bold;">className </span>= <span style="color:#008000;font-weight:bold;">'event'</span>;<br><br>                        <span style="color:#458383;">image </span>= <span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">createElement</span>(<span style="color:#008000;font-weight:bold;">'img'</span>);<br>                        <span style="color:#458383;">image</span>.<span style="color:#7a7a43;">setAttribute</span>(<span style="color:#008000;font-weight:bold;">'src'</span>, <span style="font-style:italic;">getNodeValue</span>(<span style="color:#458383;">events</span>[<span style="color:#458383;">i</span>], <span style="color:#008000;font-weight:bold;">'map'</span>));<br>                        <span style="color:#458383;">container</span>.<span style="color:#7a7a43;">appendChild</span>(<span style="color:#458383;">image</span>);<br><br>                        <span style="color:#458383;">location </span>= <span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">createElement</span>(<span style="color:#008000;font-weight:bold;">'p'</span>);<br>                        <span style="color:#458383;">city </span>= <span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">createElement</span>(<span style="color:#008000;font-weight:bold;">'b'</span>);<br>                        <span style="color:#458383;">newline </span>= <span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">createElement</span>(<span style="color:#008000;font-weight:bold;">'br'</span>);<br>                        <span style="color:#458383;">city</span>.<span style="color:#7a7a43;">appendChild</span>(<span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">createTextNode</span>(<span style="font-style:italic;">getNodeValue</span>(<span style="color:#458383;">events</span>[<span style="color:#458383;">i</span>], <span style="color:#008000;font-weight:bold;">'location'</span>)));<br>                        <span style="color:#458383;">location</span>.<span style="color:#7a7a43;">appendChild</span>(<span style="color:#458383;">newline</span>);<br>                        <span style="color:#458383;">location</span>.<span style="color:#7a7a43;">insertBefore</span>(<span style="color:#458383;">city</span>, <span style="color:#458383;">newline</span>);<br>                        <span style="color:#458383;">location</span>.<span style="color:#7a7a43;">appendChild</span>(<span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">createTextNode</span>(<span style="font-style:italic;">getNodeValue</span>(<span style="color:#458383;">events</span>[<span style="color:#458383;">i</span>], <span style="color:#008000;font-weight:bold;">'date'</span>)));<br>                        <span style="color:#458383;">container</span>.<span style="color:#7a7a43;">appendChild</span>(<span style="color:#458383;">location</span>);<br><br>                        <span style="color:#660e7a;font-weight:bold;">document</span>.<span style="color:#7a7a43;">getElementById</span>(<span style="color:#008000;font-weight:bold;">'content'</span>).<span style="color:#7a7a43;">appendChild</span>(<span style="color:#458383;">container</span>);<br>                    }<br><br>                    <span style="color:#808080;font-style:italic;">// Gets content from XML<br></span><span style="color:#808080;font-style:italic;">                    </span><span style="color:#000080;font-weight:bold;">function </span><span style="font-style:italic;">getNodeValue</span>(obj, tag){<br>                        <span style="color:#000080;font-weight:bold;">return </span>obj.<span style="color:#7a7a43;">getElementsByTagName</span>(tag)[<span style="color:#0000ff;">0</span>].<span style="color:#7a7a43;">firstChild</span>.<span style="color:#660e7a;font-weight:bold;">nodeValue</span>;<br>                    }<br>                }<br>            };<br><br>            <span style="color:#808080;font-style:italic;">// 2. prepare and send request<br></span><span style="color:#808080;font-style:italic;">            </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#7a7a43;">open</span>(<span style="color:#008000;font-weight:bold;">'get'</span>, <span style="color:#008000;font-weight:bold;">'a.xml'</span>, <span style="color:#000080;font-weight:bold;">true</span>);<br>            <span style="color:#660e7a;font-weight:bold;font-style:italic;">xhr</span>.<span style="color:#7a7a43;">send</span>();<br>        <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">script</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">head</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">body</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">div </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">id=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"content"</span><span style="background-color:#efefef;">&gt;&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">div</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">body</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">html</span><span style="background-color:#efefef;">&gt;</span><br></pre></div><div><br></div><div><br></div><div><br></div><div><b><font class="Apple-style-span" color="#800000" style="background-color: rgb(204, 255, 255);">html result - a.html &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></b></div></font></div></span><span class="Apple-style-span" style="font-family: Consolas; font-size: 14px; white-space: pre; background-color: rgb(255, 255, 255); "><div><span class="Apple-style-span" style="font-family: Consolas; font-size: 14px; white-space: pre; background-color: rgb(255, 255, 255); "><br></span></div>    <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">div </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">class=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"event"</span><span style="background-color:#efefef;">&gt;</span></span><span class="Apple-style-span" style="font-family: Consolas; "><div><font class="Apple-style-span" face="Consolas"><div><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;">        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">img </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">src=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"file.png" </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">alt=</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">"Location"</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">p</span><span style="background-color:#efefef;">&gt;&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">b</span><span style="background-color:#efefef;">&gt;</span>Location<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">b</span><span style="background-color:#efefef;">&gt;&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">br</span><span style="background-color:#efefef;">&gt;</span>Event date<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">p</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">div</span><span style="background-color:#efefef;">&gt;</span>  </pre></div><div><br></div><div><br></div><div><br></div><div><b><font class="Apple-style-span" color="#800000" style="background-color: rgb(204, 255, 255);">xml source - a.xml &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></b></div><div><pre style="background-color:#ffffff;color:#000000;font-family:'Consolas';font-size:10.5pt;">    <span style="font-style:italic;">&lt;?</span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">xml version</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">="1.0" </span><span style="color:#0000ff;background-color:#efefef;font-weight:bold;">encoding</span><span style="color:#008000;background-color:#efefef;font-weight:bold;">="utf-8" </span><span style="font-style:italic;">?&gt;<br></span><span style="font-style:italic;">    </span><span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">events</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">event</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">location</span><span style="background-color:#efefef;">&gt;</span>San Francisco, CA<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">location</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">date</span><span style="background-color:#efefef;">&gt;</span>May 1<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">date</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">map</span><span style="background-color:#efefef;">&gt;</span>img/map-ca.png<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">map</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">event</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">event</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">location</span><span style="background-color:#efefef;">&gt;</span>Austin, TX<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">location</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">date</span><span style="background-color:#efefef;">&gt;</span>May 15<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">date</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">map</span><span style="background-color:#efefef;">&gt;</span>img/map-tx.png<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">map</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">event</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">event</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">location</span><span style="background-color:#efefef;">&gt;</span>New York, NY<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">location</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">date</span><span style="background-color:#efefef;">&gt;</span>May 30<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">date</span><span style="background-color:#efefef;">&gt;</span><br>            <span style="background-color:#efefef;">&lt;</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">map</span><span style="background-color:#efefef;">&gt;</span>img/map-ny.png<span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">map</span><span style="background-color:#efefef;">&gt;</span><br>        <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">event</span><span style="background-color:#efefef;">&gt;</span><br>    <span style="background-color:#efefef;">&lt;/</span><span style="color:#000080;background-color:#efefef;font-weight:bold;">events</span><span style="background-color:#efefef;">&gt;</span><br></pre><!--EndFragment--></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div></div></font></div></span></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>