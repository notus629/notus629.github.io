<html><head></head>
<body>

<div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>ip 命令</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; ifconfig 命令已经过时，改用 ip (CentOS 7 里无 ifconfig 命令，使用 ip 代替）</span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);"><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; ifconfig 是 net-tools 中已被废弃使用的一个命令，许多年前就已经没有维护了</span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; iproute2 套件里提了许多增强功能的命令，ip 命令即是其中之一</span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><b>ip 命令常用参数</b></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp;<font class="Apple-style-span" color="#ff00ff"> ip &nbsp;[选项] &nbsp;操作对象{link|addr|route...}</font></span></div><div style="background-color: rgb(255, 255, 255); "><br></div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # <font class="Apple-style-span" color="#ff0000">ip link show</font> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;## 显示网络接口信息</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip link set eth0 up &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## 开启网卡</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip link set eth0 down &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## 关闭网卡</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip link set eth0 promisc on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## 开启网卡的混合模式</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip link set eth0 promisc offi &nbsp; &nbsp; &nbsp; &nbsp; ## 关闭网卡的混个模式</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip link set eth0 txqueuelen 1200 &nbsp; &nbsp; &nbsp;## 设置网卡队列长度</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip link set eth0 mtu 1400 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## 设置网卡最大传输单元</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # <font class="Apple-style-span" color="#ff0000">ip addr show</font> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;## 显示网卡IP信息, <font class="Apple-style-span" color="#0000ff">ip add</font> 也可以</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip addr add 192.168.0.1/24 dev eth0 &nbsp; ## 设置eth0网卡IP地址192.168.0.1</div><div style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip addr del 192.168.0.1/24 dev eth0 &nbsp; ## 删除eth0网卡IP地址</div></font><span class="Apple-style-span" style="font-family: Consolas; background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # ip route list &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## 查看路由信息</span><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><div>&nbsp;</div></span></font><span class="Apple-style-span" style="font-family: Consolas; background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; # 设置 192.168.4.0 网段的网关为 192.168.0.254, 数据走 eth0 接口</span><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><div>&nbsp; &nbsp; # ip route add 192.168.4.0/24 &nbsp;via &nbsp;192.168.0.254 dev eth0&nbsp;</div><div><br></div><div>&nbsp; &nbsp; # ip route add default via &nbsp;192.168.0.254 &nbsp;dev eth0 &nbsp; &nbsp; &nbsp; &nbsp;## 设置默认网关为192.168.0.254</div><div>&nbsp; &nbsp; # ip route del 192.168.4.0/24 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## 删除192.168.4.0网段的网关</div><div>&nbsp; &nbsp; # ip route del default &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;## 删除默认路由</div></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><b>示例</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; a. 解决 cenos7 默认安装无法上网问题[2], 主要由于 dhcp 未开启</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; ## 1. 查看网卡 IP 信息，找到未开启的网卡名，如 enp0s3</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">$ ip add</font></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; ## 2. 找到网卡对应的配置文件（enp0s3对应ifcfg-enp0s3），打开进行编辑</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">$ sudo vi /etc/sysconfig/network-scripts/ifcfg-enp0s3</font></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; ## 3. <font class="Apple-style-span" color="#ff00ff">BOOTPROTO=dhcp</font> 表示使用dhcp</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ONBOOT=no 默认值为no，改为yes, 保存后重启</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; b. 配置静态 IP</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 1. 注释 BOOTPROTO=dhcp</font></div><div><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">#BOOTPROTO=dhcp</font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 2. 添加以下内容</font></div><div><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ONBOOT=yes</font></div><div><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IPADDR0=172.8.1.211</font></div><div><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PREFIX0=24</font></div><div><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GATEWAY0=172.8.1.1</font></div><div><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DNS1=172.8.1.1</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><b>References</b></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; [1]&nbsp;试试Linux下的ip命令，ifconfig已经过时了 &nbsp;<a href="http://www.linuxidc.com/Linux/2014-06/102670.htm">http://www.linuxidc.com/Linux/2014-06/102670.htm</a></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; [2]&nbsp;CentOS 7 网络配置 &nbsp;<a href="http://simonhu.blog.51cto.com/196416/1588971">http://simonhu.blog.51cto.com/196416/1588971</a></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><div><font class="Apple-style-span" face="Consolas"><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></font></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>