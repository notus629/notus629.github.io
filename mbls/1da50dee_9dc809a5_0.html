<html><head></head>
<body>

<div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>Thread safe</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 下载 php 的时候，有两个版本 thread safe 与 non-thread safe 版，分别表示线程安全和非线程安全</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; Thread Safe 版执行时会进行线程安全检查，以防止有新要求就启动新线程的 CGI 方式耗尽系统资源。（主要针对 CGI 方式，以多线程方式进行处理，Leo 注）</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; Non-Thread Safe 版在执行时不进行线程安全检查。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>PHP 两种执行方式: ISAPI 和 Fast CGI</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; Fast CGI 执行方式是以单一线程来执行操作（多进程，Leo 注），所以不需要进行线程的安全检查，除去此检查反而可以提高执行效率，<span class="Apple-style-span" style="background-color: rgb(204, 255, 255);">主要是 IIS 的执行方式</span>。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; ISAPI 方式执行，因为有许多 PHP 模块都不是线程安全的，所以需要使用 <font class="Apple-style-span" color="#ff0000"><b>Thread Safe </b></font>的 PHP。<span class="Apple-style-span" style="background-color: rgb(204, 255, 255);">一般与 Apache 环境搭配</span>，或者当 IIS 以 ISAPI 方式运行时。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; ISAPI 即&nbsp;Internet Server Application Programming Interface，即微软为 Internet Server 提供的 API，以 DLL 形式被 HTTP 服务器加载和调用。[2]</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>SAPI</b> [3]</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; SAPIs 使得应用程序以接口的形式调用 PHP，用于定义数据在应用程序（HTTP服务器）和 PHP 之间传递的方式。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><span class="Apple-style-span" style="font-family: Consolas; "><b>References</b></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [1]&nbsp;<a href="https://zhidao.baidu.com/question/538313477.html">php5 non-thread-safe和thread-safe这两个版本有何区别？-百度知道</a></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [2] <a href="http://baike.baidu.com/link?url=BNq7LDnm4QfReueuHQVV9A0nZnyrdmWX6hiZtk4mYzo-7ZurpyXPWYV-jlQVr-YXdHknBiLS0nAXlDwt67xoN_">百度百科：ISAPI </a></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [3]&nbsp;SAPIs:&nbsp;<a href="http://php.find-info.ru/php/016/ch23lev1sec1.html">http://php.find-info.ru/php/016/ch23lev1sec1.html</a></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [4] "PHP 和 MySQL Web 开发（原书第4版）"-附录A, p705-706.</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><br></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>