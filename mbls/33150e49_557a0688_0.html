<html><head></head>
<body>

<div><br></div><div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><b>Win10 + PHP7.1 + Nginx1.12.0</b></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 参考 [1]&nbsp;</font></span></div></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><font class="Apple-style-span" face="Consolas"><b>准备</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 1. 下载 <font class="Apple-style-span" color="#0000ff">Nginx Windows, stable 版</font> [2]</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<!--StartFragment-->下载文件为<!--EndFragment-->：&nbsp;nginx-1.12.0.zip (Nginx 二进制程序)&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 2. 下载 <font class="Apple-style-span" color="#0000ff">PHP, Windows 64 bit, NTS 版</font> （非线程安全版，因为&nbsp;Nginx 采用 fastCGI 的<font class="Apple-style-span" color="#993400">多进程</font>方式运行）[3]</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 下载文件为：&nbsp;php-7.1.4-nts-Win32-VC14-x64.zip&nbsp;</font><span class="Apple-style-span" style="font-family: Consolas; ">(Nginx 二进制程序)</span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>安装步骤</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">1. 确定开发目录，Nginx 和 PHP 目录</font></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 新建自定义目录 D:\nginx_php7, 复制 PHP, Nginx 压缩包，分别解压为&nbsp;nginx-1.12.0/ &amp;&nbsp;php7/</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 其中，PHP 和 Nginx 的目录关系无关紧要</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">2. 准备 PHP 配置文件</font></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 在 PHP 文件夹下，将 php.ini-development 与 php.ini-production 之一改名为 php.ini 作为 PHP 的配置文件 (分别对应着 PHP 开发环境配置和 PHP 生产环境配置)</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">3. 以 fastCGI 方式启动 php, 并监听</font>本地&nbsp;127.0.0.1 的 9000 端口</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 在 PHP 目录下打开命令行窗口，执行</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas" color="#666699">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## -b 告诉 php 启动 FastCGI 服务，</font><span class="Apple-style-span" style="color: rgb(102, 102, 153); font-family: Consolas; background-color: rgb(255, 255, 255); ">启动后须保持命令行窗口（关闭会终止&nbsp;php fast-cgi 服务）</span></div><div><font class="Apple-style-span" face="Consolas"><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt; php-cgi -b 127.0.0.1:9000</font>&nbsp;</font></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">4. 开启 Nginx 服务</font>，在 Nginx 目录下，命令行执行</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#666699">&nbsp; &nbsp; &nbsp; &nbsp; ## 终止命令行后似乎 nginx 服务仍在后台运行</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff00ff">&gt; nginx</font></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">5. 配置 Nginx 默认首页和根目录</font>, 打开 D:\nginx_php7\nginx-1.12.0\conf\nginx.conf 文件，进行如下配置</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; </font><font class="Apple-style-span" face="Consolas" color="#666699">## 添加根目录和默认首页文件</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; server{</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; root html;</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index index.php index.html index.htm;</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">6. 配置 Nginx</font> 在启动时通过 FastCGI 模式<font class="Apple-style-span" color="#ff6600">与 PHP 通信</font>，在 Nginx 配置文件中开启如下内容</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#666699">&nbsp; &nbsp; &nbsp; &nbsp; ## 其中 </font><font class="Apple-style-span" face="Consolas" color="#0000ff">complete_path_webroot_folder</font><font class="Apple-style-span" face="Consolas" color="#666699"> 的默认值是 Nginx 目录中的 html 目录</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#666699">&nbsp; &nbsp; &nbsp; &nbsp; ## - 此处默认配置为：/scripts， 将其</font><font class="Apple-style-span" face="Consolas" color="#0000ff">改为</font><font class="Apple-style-span" face="Consolas" color="#666699">&nbsp;</font><font class="Apple-style-span" face="Consolas" color="#ff0000"><b>D:/nginx_php7/nginx-1.12.0/htm</b></font><font class="Apple-style-span" face="Consolas" color="#ff0000"><b>l</b></font><font class="Apple-style-span" face="Consolas" color="#666699">, 注意非 \ 而是 /</font></span></div><div><font class="Apple-style-span" color="#666699" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; ## 否则访问&nbsp;html 文件能正确解析，而 php 文件会显示 "No input file specified"</font></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; location ~ \.php$ {</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_pass 127.0.0.1:9000;</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param SCRIPT_FILENAME </font><font class="Apple-style-span" face="Consolas" color="#800000"><b>complete_path_webroot_folder</b></font><font class="Apple-style-span" face="Consolas" color="#ff00ff">$fastcgi_script_name;</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; include fastcgi_param;</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><font class="Apple-style-span" color="#ff00ff">&nbsp; &nbsp; &nbsp; &nbsp; } &nbsp;</font> &nbsp; &nbsp; &nbsp;</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas" color="#ff6600">&nbsp; &nbsp; 7. 重新载入 nginx 配置文件</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></span><span class="Apple-style-span" style="font-family: Consolas; background-color: rgb(255, 255, 255); "><font class="Apple-style-span" color="#ff00ff">&gt; nginx -s reload</font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#666699">## 也可以先进行配置，再启动 nginx, 启动后可以关闭命令行窗口（不会关闭 nginx 服务）</font></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <font class="Apple-style-span" color="#ff99cc">&gt; nginx</font></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><b>References</b></font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [1] 高性能 PHP7 (Learning PHP 7 High Performance)， Altaf Hussain 著，吕毅译，电子工业出版社，2017， p2-4.</font></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [2] Nginx <a href="http://nginx.org/en">http://nginx.org/en</a></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [3] PHP <a href="http://windows.php.net/download/">http://windows.php.net/download/</a></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>