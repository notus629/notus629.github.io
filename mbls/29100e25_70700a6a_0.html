<html><head></head>
<body>

<div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><b><font class="Apple-style-span" face="Consolas">1. 安装好 xdebug, 通过phpinfo()来判断[1]</font></b></span></div><div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 须在<span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">有效的 php.ini 里加入如下内容</span></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<font class="Apple-style-span" color="#ff0000"><b>zend_extension</b></font>=&lt;full_path_to_xdebug_extension&gt;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <b><font class="Apple-style-span" color="#ff0000">xdebug.remote_enable</font></b>=<font class="Apple-style-span" color="#0000ff"><b>1</b></font></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <b><font class="Apple-style-span" color="#ff0000">xdebug.remote_host</font></b>=&lt;the host where PhpStorm is running (e.g. <font class="Apple-style-span" color="#0000ff"><b>localhost</b></font>)&gt;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; <b><font class="Apple-style-span" color="#ff0000">xdebug.remote_port</font></b>=&lt;the port to which Xdebug tries to connect on the host where PhpStorm is running (default <font class="Apple-style-span" color="#0000ff"><b>9000</b></font>)&gt;</font></div></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><font class="Apple-style-span" face="Consolas"><br></font></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><div><b><font class="Apple-style-span" face="Consolas">2. 准备 phpstorm[3]</font></b></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 打开 "Start Listening for PHP Debug Connections" 按钮开关（不要使用任何运行配置）</font></div></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><b><font class="Apple-style-span" face="Consolas">3. 验证调试信息，即xdebug是否与phpstorm兼容互通[2]</font></b></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; （可以是本地部署，即代码、webserver在本地，也可以是远程部署，代码在本地而webserver在远程）</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 点击Run-&gt;Web server debug validation，再配置"创建验证脚本的路径"，指定一个websever上的路径（如C:\wamp64\www\test), 还有配置"验证脚本的url"，即前面指定的路径的url地址。二者一定匹配。<br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 点击 Validate, 若全为淡蓝色感叹号标记，则验证成功。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><b><font class="Apple-style-span" face="Consolas">4. 在源码中设置断点</font></b></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 可以在菜单栏中选择为每一个php脚本的第一行设置断点，当然，也可以手动设置断点</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><b><font class="Apple-style-span" face="Consolas">5. 激活web server上的debugger</font></b></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 方法1：需要设置一个特殊的 GET/POST 或 COOKIE 参数来激活server上的debugger</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 1st, php.ini 设置</font></div><div><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xdebug.remote_enable=1 &nbsp; &nbsp; &nbsp; &nbsp; ## 同步骤1 &nbsp; &nbsp;</span></div><div><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xdebug.remote_host &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## ditto</span></div><div><span class="Apple-style-span" style="font-family: Consolas; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xdebug.remote_port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## ditto</span></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xdebug.remote_connect_back &nbsp; &nbsp; ## if development server is shared with multiple developers</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xdebug.remote_mode &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## initiate a session when an error situation occurs (e.g. "req" )</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 2nd, 激活 Xdebug's debugger</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 方法 a, 在命令行下运行脚本适用， 略（参见[6])</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 方法 b, 如果想通过web浏览器来调试脚本。可以直接把XDEBUG_SESSION_START=session_name作为参数加入URL. 或者，把XDEBUG_SESSION_START作为一个POST参数. 或者通过一个 cookie.(详细参见[6])</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 方法 c, 安装下面的4个浏览器插件之一，单击按键直接enable the debugger.当extensions 被激活后，它们直接自动设置 XDEBUG_SESSION cookie.</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The easiest Xdebug(Firefox), Xdebug Helper(Chrome), Xdebug Toggler(Safari), Xdebug launcher(Opera).</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 方法2：直接使用浏览器工具条(browser toolbar)[5] 或书签工具(bookmarklet)，见参考文献[4]来生成一个IDE key为指定值的bookmarklet</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>6.&nbsp;Start a debug session in browser</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 点 phpstorm 生成的bookmarklet之"Start debugger"书签, 或者浏览器插件的开始debug按钮。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 此步骤必须是先在浏览器中打开php脚本，否则插件无法点击激活debug。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; （此时chrome--安装了Xdebug Helper，左下角显示 "正在等待localhost的响应"，若没有打开phpstorm的监听，亦或phpstorm未启动，不会有等待状态，php脚本会直接执行）。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>7. 重新载入当前页</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>8. 设置初始路径映射（initial path mappings)</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; PhpStorm会弹出一个对话框（Incoming Connection From Xdebug)。(碰到未弹出此对话框的情况，打开的工程并非在浏览器中运行的php脚本所在工程，此时并不会弹出，关闭phpstorm并重新打开此脚本所在的工程后，顺利弹出此对话框。此工程也是步骤3的验证目录，不知是否有影响)</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 需要选择路径映射，使PhpStorm能将远程文件们（web server）映射到本地工程中的文件们。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>9. 调试</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 上步完成后，即会到达断点进行调试&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">[Ref 1]&nbsp;<a href="https://confluence.jetbrains.com/display/PhpStorm/Xdebug+Installation+Guide">Xdebug Installation Guide</a></font></div><div><font class="Apple-style-span" face="Consolas">[Ref 2]&nbsp;<a href="https://confluence.jetbrains.com/display/PhpStorm/Validating+Your+Debugging+Configuration">Validating Your Debugging Configuration</a></font></div><div><font class="Apple-style-span" face="Consolas">[Ref 3]&nbsp;<a href="https://confluence.jetbrains.com/display/PhpStorm/Zero-configuration+Web+Application+Debugging+with+Xdebug+and+PhpStorm">Zero-configuration Web Application Debugging with Xdebug and PhpStorm</a></font></div><div><font class="Apple-style-span" face="Consolas">[Ref 4]&nbsp;<a href="https://www.jetbrains.com/phpstorm/marklets/">Xdebug &amp; Zend Debugger bookmarklets generator for PhpStorm</a></font></div><div><font class="Apple-style-span" face="Consolas">[Ref 5]&nbsp;<a href="https://confluence.jetbrains.com/display/PhpStorm/Browser+Debugging+Extensions">Browser Debugging Extensions</a></font></div><div><font class="Apple-style-span" face="Consolas">[Ref 6] <a href="https://xdebug.org/docs/remote#starting">xdebug document-Starting The Debugger</a></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><br></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>