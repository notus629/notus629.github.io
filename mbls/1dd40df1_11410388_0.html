<html><head></head>
<body>

<div><br></div><div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>git reset</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 回溯历史版本</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;在 commit 级别上，git reset 命令移动<font class="Apple-style-span" color="#ff0000" style="background-color: rgb(240, 240, 240);"> HEAD </font>到当前分支的一个 commit， 这可以用来撤销当前分支的一些 commit 。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><div>&nbsp; &nbsp; ## 仅是将 git 中当前版本变为某个版本，但工作目录中的文件没有覆盖</div><div><font class="Apple-style-span" face="Consolas"><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; ## 让当前分支回退两个 commits，<font class="Apple-style-span" color="#0000ff"><b>下一次 git 提交时，这两个 commit 会被删掉</b></font></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;<font class="Apple-style-span" color="#ff6600">$ git reset HEAD~2</font>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;## 回退到上上个版本&nbsp;</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;<font class="Apple-style-span" color="#ff6600">$ git reset HEAD^</font>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;## 回退到上个版本</font></div><div><br></div></font></div></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; ## 让仓库的 HEAD, 暂存区，当前工作树回溯到指定状态</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; ## 哈希值可由 git log 查看，只提供 4 位以上即可</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">$ git reset --hard &lt;目标时间点的哈希值&gt;</font></font></div><div><span class="Apple-style-span" style="font-family: Consolas; "><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">$ git reset --hard HEAD^^</font> &nbsp; &nbsp; &nbsp;## 回退到上上个版本</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">$ git reset --hard HEAD~100</font> &nbsp; &nbsp;## 回退到前100个版本</font></div></span></div><div><font class="Apple-style-span" face="Consolas"><br></font></div></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff6600">$ git reflog</font> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## 若已回退，新版本的版本号不见了，可通过此命令来查看</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><b>选项</b></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff0000">--soft</font>: staged snapshot 和 working directory 都未被改变&nbsp;(建议在命令行执行后，再输入 git status 查看状态)</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff0000">--mixed</font>: stategd snapshot 被更新，working directory 未被更改。（默认选项，建议同上）</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; <font class="Apple-style-span" color="#ff0000">--hard</font>: staged snapshot 和 working directory 都将回退。</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><b>Leo 注：</b></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; git reset 三种选项，都会使得，下次 git commit 提交时，<font class="Apple-style-span" color="#ff6600"><b>回退时被跳过的新 commit 会被删掉</b></font>。</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; git reset --hard 会很危险，会使得被路过的内容被删掉（包括当前工作树内容）。</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; git reset --soft or --mixed 并未改变 working directory, 因而最新的修改在 commit 之后仍会保存，并且删掉中间被路过的 commit, <font class="Apple-style-span" color="#0000ff">在打算删除中间过多的 commit 时有用</font>。</font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div><div style="font-family: 'Times New Roman'; "><font class="Apple-style-span" face="Consolas"><br></font></div></font></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>