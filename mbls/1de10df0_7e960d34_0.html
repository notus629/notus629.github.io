<html><head></head>
<body>

<div><font class="Apple-style-span" face="Consolas"><br></font></div><div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><b><font class="Apple-style-span" face="Consolas">实现会话步骤</font></b></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;<b>&nbsp;Step 1. &nbsp;开始一个会话</b></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;method a. &nbsp;<font class="Apple-style-span" color="#ff0000"><b>session_start()</b></font>;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;该函数会检查是否有一个会话 ID 存在，不存在则创建，存在则重新载入</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;method b. 将 PHP 设置成当有用户访问网站的时候就自动启动一个会话</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 使用&nbsp;php.ini 中&nbsp;<font class="Apple-style-span" color="#0000ff">session.auto_start&nbsp;</font>选项，此设置会导致无法使用对象作为会话变量，因为对象的类定义须在创建该对象的会话开始前载入</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><b><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; Step 2. &nbsp;注册一个会话变量</font></b></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<font class="Apple-style-span" color="#ff0000"><b>$_SESSION[ 'my_var' ] = 5;</b></font></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 只有在会话结束或手动重置它时才失效，或在 php.ini 文件中对会话&nbsp;<b><font class="Apple-style-span" color="#0000ff">gc_maxlifetime&nbsp;</font></b>指令设置（指定会话的持续时间，秒数）</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;<b>Step 3. &nbsp;使用会话变量</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 先使用&nbsp;<font class="Apple-style-span" color="#ff0000"><b>session_start();</b></font></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 若会话变量为对象，则重新载入前，此对象的类定义须先载入</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 检测一个变量是否是注册的会话变量</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<font class="Apple-style-span" color="#ff0000"><b>&nbsp;if (isset($_SESSION['myvar']))</b></font>...</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;<b>&nbsp;Step 4. &nbsp;注销变量与销毁会话</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 注销会话变量</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<b style="color: rgb(255, 0, 0); ">unset($_SESSION['myvar']);</b></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 不再推荐 session_unregister(), session_unset()&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 不能销毁整个 $_SESSION 数组，这样会禁用会话功能</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 使用完一个会话后</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 首先应销毁所有会话变量，使用<font class="Apple-style-span" color="#ff0000"><b>&nbsp;$_SESSION = array();</b></font></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 再调用&nbsp;<font class="Apple-style-span" color="#ff0000"><b>session_destroy()&nbsp;</b></font>来清除会话ID</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp;&nbsp;</font></div></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>