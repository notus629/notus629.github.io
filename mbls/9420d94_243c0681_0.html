<html><head></head>
<body>

<div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>1. WDCP 中，进行配置检查，显示如下错误</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 配置文件有错</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; nginx: [emerg] getpwnam("www") failed in /www/wdlinux/nginx-1.8.1/conf/nginx.conf:4</font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; nginx: configuration file /www/wdlinux/nginx-1.8.1/conf/nginx.conf test failed</font></div></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">A.&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><b>&nbsp; &nbsp; 错误原因</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 没有创建 www 这个用户和用户组 www</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; nginx.conf 文件中默认配置，需要使用 www 用记和 www 组，若没有，则会出现上面错误。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>&nbsp; &nbsp; 解决方案</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 1. 在 nginx.conf 中 把 user nobody 的注释去掉</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 实际并不存在 user nobody 语句，存在 user www www 语句，试着注释，然后加上 user nobody</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 实际 &nbsp;user nobody 语句存在于 nginx.conf.default 中</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 2. 创建 www 用户和 www 用户组 (未实践，leo, 2016-12-4）</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>&nbsp; &nbsp; 结果</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp; 采用解决方案1，错误消失，可以正确看到nginx服务。</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; [Ref 1]&nbsp;<a href="http://blog.itblood.com/nginx-emerg-getpwnam-www-failed.html">nginx: [emerg] getpwnam(“www”) failed 错误处理方法</a></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><b>2. Nginx服务器的&nbsp;web 根目录在哪里？</b></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">A.&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; 在配置文件(nginx.conf.default)，中说明了缺省设置，有如下语句</font></div><div><font class="Apple-style-span" face="Consolas"><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; location / {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; root &nbsp; html;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index &nbsp;index.php index.html index.htm;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div><br></div><div>&nbsp; &nbsp; 表明了默认web根目录在 nginx 主目录下（我的为/www/wdlinux/nginx）的 html子目录内。但实际并非如此，因为还存在其它配置文件。</div><div><br></div><div>&nbsp; &nbsp; 配置文件nginx.conf中有如下语句</div><div>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; include vhost/*.conf;</div><div><br></div><div>&nbsp; &nbsp; 实际上引入了 vhost 目录下的所有配置文件，在我的实际操作中，vhost存在两个配置文件，如下</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; 00000.default.conf &nbsp;notus-leo.com.conf</div><div><br></div><div>&nbsp; &nbsp; 其中都说明了web根目录位置，经测试，是以0000.default.conf中指定的web目录为最终Nginx服务器的根目录。</div></font></div><div><font class="Apple-style-span" face="Consolas">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><font class="Apple-style-span" face="Consolas"><br></font></div><div><br></div><script type="text/javascript" language="javascript" src="jquery.js"></script><script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>